"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/classifica/route";
exports.ids = ["app/api/classifica/route"];
exports.modules = {

/***/ "firebase-admin/app":
/*!*************************************!*\
  !*** external "firebase-admin/app" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/app");

/***/ }),

/***/ "firebase-admin/firestore":
/*!*******************************************!*\
  !*** external "firebase-admin/firestore" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("firebase-admin/firestore");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassifica%2Froute&page=%2Fapi%2Fclassifica%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassifica%2Froute.ts&appDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassifica%2Froute&page=%2Fapi%2Fclassifica%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassifica%2Froute.ts&appDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/node-polyfill-headers */ \"(rsc)/./node_modules/next/dist/server/node-polyfill-headers.js\");\n/* harmony import */ var next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_node_polyfill_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_FullPrice_Desktop_giancarlo_padel_championship_giancarlo_padel_championship_app_api_classifica_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/classifica/route.ts */ \"(rsc)/./app/api/classifica/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_1__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_2__.RouteKind.APP_ROUTE,\n        page: \"/api/classifica/route\",\n        pathname: \"/api/classifica\",\n        filename: \"route\",\n        bundlePath: \"app/api/classifica/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\FullPrice\\\\Desktop\\\\giancarlo-padel-championship\\\\giancarlo-padel-championship\\\\app\\\\api\\\\classifica\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_FullPrice_Desktop_giancarlo_padel_championship_giancarlo_padel_championship_app_api_classifica_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/classifica/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGFzc2lmaWNhJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbGFzc2lmaWNhJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2xhc3NpZmljYSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNGdWxsUHJpY2UlNUNEZXNrdG9wJTVDZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcCU1Q2dpYW5jYXJsby1wYWRlbC1jaGFtcGlvbnNoaXAlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0Z1bGxQcmljZSU1Q0Rlc2t0b3AlNUNnaWFuY2FybG8tcGFkZWwtY2hhbXBpb25zaGlwJTVDZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDc0Q7QUFDdkM7QUFDdUY7QUFDdEo7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcC8/MjUwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJuZXh0L2Rpc3Qvc2VydmVyL25vZGUtcG9seWZpbGwtaGVhZGVyc1wiO1xuaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcRnVsbFByaWNlXFxcXERlc2t0b3BcXFxcZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcFxcXFxnaWFuY2FybG8tcGFkZWwtY2hhbXBpb25zaGlwXFxcXGFwcFxcXFxhcGlcXFxcY2xhc3NpZmljYVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NsYXNzaWZpY2Evcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jbGFzc2lmaWNhXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jbGFzc2lmaWNhL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcRnVsbFByaWNlXFxcXERlc2t0b3BcXFxcZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcFxcXFxnaWFuY2FybG8tcGFkZWwtY2hhbXBpb25zaGlwXFxcXGFwcFxcXFxhcGlcXFxcY2xhc3NpZmljYVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jbGFzc2lmaWNhL3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassifica%2Froute&page=%2Fapi%2Fclassifica%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassifica%2Froute.ts&appDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/classifica/route.ts":
/*!*************************************!*\
  !*** ./app/api/classifica/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase-admin/app */ \"firebase-admin/app\");\n/* harmony import */ var firebase_admin_app__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase-admin/firestore */ \"firebase-admin/firestore\");\n/* harmony import */ var firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\n// Cache per evitare calcoli ripetuti\nconst cache = new Map();\nconst CACHE_DURATION = 5 * 60 * 1000; // 5 minuti\nfunction adminDb() {\n    if (!(0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.getApps)().length) {\n        const projectId = process.env.FIREBASE_PROJECT_ID;\n        const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\n        const privateKey = process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\");\n        (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.initializeApp)({\n            credential: (0,firebase_admin_app__WEBPACK_IMPORTED_MODULE_1__.cert)({\n                projectId,\n                clientEmail,\n                privateKey\n            })\n        });\n    }\n    return (0,firebase_admin_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)();\n}\n// Funzione per calcolare la classifica\nfunction calculateStandings(matches) {\n    console.log(\"=== CALCOLO CLASSIFICA INIZIATO ===\");\n    console.log(\"calculateStandings chiamata con\", matches.length, \"partite\");\n    const stats = new Map();\n    const ensure = (id, name)=>{\n        if (!stats.has(id)) {\n            stats.set(id, {\n                name,\n                points: 0,\n                setsWon: 0,\n                setsLost: 0,\n                played: 0,\n                matchIds: []\n            });\n        }\n        return stats.get(id);\n    };\n    // Raggruppa le partite per giornata per verificare se ci sono recuperi\n    const matchdaysWithRecoveries = new Set();\n    matches.forEach((m)=>{\n        if (m.status === \"da recuperare\" && m.originalMatchday) {\n            matchdaysWithRecoveries.add(m.originalMatchday);\n        }\n    });\n    matches.forEach((m, index)=>{\n        // Salta le partite da recuperare\n        if (m.status === \"da recuperare\") {\n            console.log(`⏸️ Partita ${index + 1} (ID: ${m.id}) saltata: da recuperare`);\n            return;\n        }\n        // Salta le partite completate di giornate che hanno recuperi pendenti\n        if (m.status === \"completata\" && m.matchday && matchdaysWithRecoveries.has(m.matchday)) {\n            console.log(`⏸️ Partita ${index + 1} (ID: ${m.id}) saltata: giornata ${m.matchday} ha recuperi pendenti`);\n            return;\n        }\n        const a = Number(m.scoreA || 0);\n        const b = Number(m.scoreB || 0);\n        const matchId = m.id || `match_${index}`;\n        const teamA = (m.teamA || []).map((p)=>({\n                id: p.id || p.playerId,\n                name: p.name || p.Nome || \"??\"\n            }));\n        const teamB = (m.teamB || []).map((p)=>({\n                id: p.id || p.playerId,\n                name: p.name || p.Nome || \"??\"\n            }));\n        console.log(`\\n--- Processando partita ${index + 1} (ID: ${matchId}) ---`);\n        console.log(`Score: ${a}-${b}, Status: ${m.status}`);\n        console.log(`Team A:`, teamA.map((p)=>`${p.name} (${p.id})`));\n        console.log(`Team B:`, teamB.map((p)=>`${p.name} (${p.id})`));\n        if (!teamA.length || !teamB.length) {\n            console.log(`❌ Partita ${index + 1} saltata: team vuoti`);\n            return;\n        }\n        teamA.forEach((p)=>{\n            if (!p.id) {\n                console.log(\"❌ Player A senza ID:\", p);\n                return;\n            }\n            const s = ensure(p.id, p.name);\n            const oldPoints = s.points;\n            const oldPlayed = s.played;\n            s.points += a;\n            s.setsWon += a;\n            s.setsLost += b;\n            s.played += 1;\n            s.matchIds.push(matchId);\n            console.log(`✅ Team A - ${p.name} (${p.id}): punti ${oldPoints}→${s.points}, partite ${oldPlayed}→${s.played}, match: ${matchId}`);\n        });\n        teamB.forEach((p)=>{\n            if (!p.id) {\n                console.log(\"❌ Player B senza ID:\", p);\n                return;\n            }\n            const s = ensure(p.id, p.name);\n            const oldPoints = s.points;\n            const oldPlayed = s.played;\n            s.points += b;\n            s.setsWon += b;\n            s.setsLost += a;\n            s.played += 1;\n            s.matchIds.push(matchId);\n            console.log(`✅ Team B - ${p.name} (${p.id}): punti ${oldPoints}→${s.points}, partite ${oldPlayed}→${s.played}, match: ${matchId}`);\n        });\n    });\n    const result = Array.from(stats.entries()).map(([id, s])=>({\n            key: id,\n            name: s.name,\n            points: s.points,\n            setsWon: s.setsWon,\n            setsLost: s.setsLost,\n            setDiff: s.setsWon - s.setsLost,\n            played: s.played,\n            matchIds: s.matchIds\n        })).sort((x, y)=>y.points - x.points || y.setsWon - y.setsLost - (x.setsWon - x.setsLost) || x.played - y.played || x.name.localeCompare(y.name));\n    console.log(\"\\n=== RISULTATO FINALE CLASSIFICA ===\");\n    console.log(\"Total players:\", result.length);\n    // Debug dettagliato di ogni giocatore\n    result.forEach((player, index)=>{\n        console.log(`${index + 1}. ${player.name}: ${player.points} punti, ${player.played} partite, matches: [${player.matchIds.join(\", \")}]`);\n    });\n    console.log(\"=== FINE CALCOLO CLASSIFICA ===\\n\");\n    return result;\n}\nasync function GET(req) {\n    try {\n        // Controlla se richiediamo di invalidare la cache\n        const url = new URL(req.url);\n        const forceRefresh = url.searchParams.get(\"refresh\") === \"true\";\n        console.log(\"=== API CLASSIFICA CHIAMATA ===\");\n        console.log(\"forceRefresh:\", forceRefresh);\n        // Controlla cache (salta se forceRefresh)\n        const cacheKey = \"classifica\";\n        const cached = cache.get(cacheKey);\n        if (!forceRefresh && cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n            console.log(\"Usando cache esistente\");\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                rows: cached.data,\n                cached: true,\n                timestamp: cached.timestamp\n            });\n        }\n        if (forceRefresh) {\n            console.log(\"Invalidando cache per forceRefresh\");\n            cache.delete(cacheKey);\n        }\n        const db = adminDb();\n        // Leggi partite completate con query ottimizzata\n        const snap = await db.collection(\"matches\").where(\"status\", \"==\", \"completed\").get();\n        // Se non troviamo partite con status 'completed', proviamo a cercare partite con scoreA e scoreB\n        if (snap.empty) {\n            console.log('Nessuna partita con status \"completed\" trovata, cerco partite con score...');\n            const allMatches = await db.collection(\"matches\").get();\n            const matchesWithScore = allMatches.docs.filter((doc)=>{\n                const data = doc.data();\n                return data.scoreA !== undefined && data.scoreB !== undefined && typeof data.scoreA === \"number\" && typeof data.scoreB === \"number\" && (data.scoreA > 0 || data.scoreB > 0);\n            });\n            if (matchesWithScore.length > 0) {\n                console.log(`Trovate ${matchesWithScore.length} partite con score ma senza status 'completed'`);\n                const matches = matchesWithScore.map((doc)=>doc.data());\n                const rows = calculateStandings(matches);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    rows,\n                    cached: false,\n                    timestamp: Date.now(),\n                    totalMatches: matches.length,\n                    warning: \"Partite trovate tramite score, non tramite status 'completed'\"\n                });\n            }\n        }\n        const matches = snap.docs.map((doc)=>doc.data());\n        // Debug dettagliato delle partite trovate\n        console.log(\"Partite completate trovate:\", matches.length);\n        matches.forEach((match, index)=>{\n            console.log(`Partita ${index + 1}:`, {\n                id: match.id,\n                phase: match.phase,\n                date: match.date,\n                teamA: match.teamA?.map((p)=>({\n                        id: p.id,\n                        name: p.name\n                    })),\n                teamB: match.teamB?.map((p)=>({\n                        id: p.id,\n                        name: p.name\n                    })),\n                scoreA: match.scoreA,\n                scoreB: match.scoreB,\n                status: match.status\n            });\n        });\n        // Filtra le partite per escludere quelle future\n        let validMatches = matches;\n        console.log(\"Applicando filtro per escludere partite future...\");\n        validMatches = matches.filter((match)=>{\n            // Escludi partite con date future (come 2025-09-04)\n            if (match.date && match.date > \"2025-08-31\") {\n                console.log(`Escludendo partita futura: ${match.id} con data ${match.date}`);\n                return false;\n            }\n            return true;\n        }).sort((a, b)=>{\n            // Ordina per data e poi per ID per consistenza\n            if (a.date && b.date) {\n                return a.date.localeCompare(b.date);\n            }\n            return (a.id || \"\").localeCompare(b.id || \"\");\n        });\n        console.log(`Dopo il filtro: ${validMatches.length} partite valide`);\n        // Calcola classifica\n        const rows = calculateStandings(validMatches);\n        // Debug: log del risultato\n        console.log(\"Classifica calcolata:\", {\n            forceRefresh,\n            matchesCount: validMatches.length,\n            rowsCount: rows.length,\n            cacheHit: !forceRefresh && cached\n        });\n        // Debug dettagliato di ogni giocatore\n        console.log(\"\\n=== DETTAGLIO GIOCATORI ===\");\n        rows.forEach((player, index)=>{\n            console.log(`${index + 1}. ${player.name}: ${player.points} punti, ${player.played} partite, matches: [${player.matchIds.join(\", \")}]`);\n        });\n        console.log(\"=== FINE DETTAGLIO ===\\n\");\n        // Salva in cache\n        cache.set(cacheKey, {\n            data: rows,\n            timestamp: Date.now()\n        });\n        // Pulisci cache vecchia (mantieni solo ultimi 10 elementi)\n        if (cache.size > 10) {\n            const entries = Array.from(cache.entries());\n            entries.sort((a, b)=>b[1].timestamp - a[1].timestamp);\n            entries.slice(10).forEach(([key])=>cache.delete(key));\n        }\n        const response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            rows,\n            cached: false,\n            timestamp: Date.now(),\n            totalMatches: validMatches.length\n        });\n        // Disabilita la cache del browser\n        response.headers.set(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n        response.headers.set(\"Pragma\", \"no-cache\");\n        response.headers.set(\"Expires\", \"0\");\n        return response;\n    } catch (e) {\n        console.error(\"Errore API classifica:\", e);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            rows: [],\n            error: e?.message || \"Errore interno del server\",\n            cached: false\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGtDQUFrQztRQUNsQ3FHLFNBQVNDLE9BQU8sQ0FBQ2xGLEdBQUcsQ0FBQyxpQkFBaUI7UUFDdENpRixTQUFTQyxPQUFPLENBQUNsRixHQUFHLENBQUMsVUFBVTtRQUMvQmlGLFNBQVNDLE9BQU8sQ0FBQ2xGLEdBQUcsQ0FBQyxXQUFXO1FBRWhDLE9BQU9pRjtJQUNULEVBQUUsT0FBT0UsR0FBUTtRQUNmMUYsUUFBUTJGLEtBQUssQ0FBQywwQkFBMEJEO1FBQ3hDLE9BQU9sSCxrRkFBWUEsQ0FBQ3NGLElBQUksQ0FBQztZQUN2QkMsTUFBTSxFQUFFO1lBQ1I0QixPQUFPRCxHQUFHRSxXQUFXO1lBQ3JCbEMsUUFBUTtRQUNWLEdBQUc7WUFBRXhDLFFBQVE7UUFBSTtJQUNuQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2lhbmNhcmxvLXBhZGVsLWNoYW1waW9uc2hpcC8uL2FwcC9hcGkvY2xhc3NpZmljYS9yb3V0ZS50cz83OWNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEFwcHMsIGluaXRpYWxpemVBcHAsIGNlcnQgfSBmcm9tICdmaXJlYmFzZS1hZG1pbi9hcHAnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UtYWRtaW4vZmlyZXN0b3JlJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJztcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG4vLyBDYWNoZSBwZXIgZXZpdGFyZSBjYWxjb2xpIHJpcGV0dXRpXG5jb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbmNvbnN0IENBQ0hFX0RVUkFUSU9OID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGlcblxuZnVuY3Rpb24gYWRtaW5EYigpIHtcbiAgaWYgKCFnZXRBcHBzKCkubGVuZ3RoKSB7XG4gICAgY29uc3QgcHJvamVjdElkID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCE7XG4gICAgY29uc3QgY2xpZW50RW1haWwgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9DTElFTlRfRU1BSUwhO1xuICAgIGNvbnN0IHByaXZhdGVLZXkgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWSEucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpO1xuICAgIGluaXRpYWxpemVBcHAoeyBjcmVkZW50aWFsOiBjZXJ0KHsgcHJvamVjdElkLCBjbGllbnRFbWFpbCwgcHJpdmF0ZUtleSB9KSB9KTtcbiAgfVxuICByZXR1cm4gZ2V0RmlyZXN0b3JlKCk7XG59XG5cbi8vIEZ1bnppb25lIHBlciBjYWxjb2xhcmUgbGEgY2xhc3NpZmljYVxuZnVuY3Rpb24gY2FsY3VsYXRlU3RhbmRpbmdzKG1hdGNoZXM6IGFueVtdKSB7XG4gIGNvbnNvbGUubG9nKCc9PT0gQ0FMQ09MTyBDTEFTU0lGSUNBIElOSVpJQVRPID09PScpO1xuICBjb25zb2xlLmxvZygnY2FsY3VsYXRlU3RhbmRpbmdzIGNoaWFtYXRhIGNvbicsIG1hdGNoZXMubGVuZ3RoLCAncGFydGl0ZScpO1xuICBcbiAgY29uc3Qgc3RhdHMgPSBuZXcgTWFwPHN0cmluZywge1xuICAgIG5hbWU6IHN0cmluZzsgXG4gICAgcG9pbnRzOiBudW1iZXI7IFxuICAgIHNldHNXb246IG51bWJlcjsgXG4gICAgc2V0c0xvc3Q6IG51bWJlcjsgXG4gICAgcGxheWVkOiBudW1iZXI7XG4gICAgbWF0Y2hJZHM6IHN0cmluZ1tdOyAvLyBERUJVRzogdHJhY2NpYSBsZSBwYXJ0aXRlIHBlciBvZ25pIGdpb2NhdG9yZVxuICB9PigpO1xuXG4gIGNvbnN0IGVuc3VyZSA9IChpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXN0YXRzLmhhcyhpZCkpIHtcbiAgICAgIHN0YXRzLnNldChpZCwgeyBuYW1lLCBwb2ludHM6IDAsIHNldHNXb246IDAsIHNldHNMb3N0OiAwLCBwbGF5ZWQ6IDAsIG1hdGNoSWRzOiBbXSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRzLmdldChpZCkhO1xuICB9O1xuXG4gIC8vIFJhZ2dydXBwYSBsZSBwYXJ0aXRlIHBlciBnaW9ybmF0YSBwZXIgdmVyaWZpY2FyZSBzZSBjaSBzb25vIHJlY3VwZXJpXG4gIGNvbnN0IG1hdGNoZGF5c1dpdGhSZWNvdmVyaWVzID0gbmV3IFNldCgpO1xuICBtYXRjaGVzLmZvckVhY2gobSA9PiB7XG4gICAgaWYgKG0uc3RhdHVzID09PSAnZGEgcmVjdXBlcmFyZScgJiYgbS5vcmlnaW5hbE1hdGNoZGF5KSB7XG4gICAgICBtYXRjaGRheXNXaXRoUmVjb3Zlcmllcy5hZGQobS5vcmlnaW5hbE1hdGNoZGF5KTtcbiAgICB9XG4gIH0pO1xuXG4gIG1hdGNoZXMuZm9yRWFjaCgobSwgaW5kZXgpID0+IHtcbiAgICAvLyBTYWx0YSBsZSBwYXJ0aXRlIGRhIHJlY3VwZXJhcmVcbiAgICBpZiAobS5zdGF0dXMgPT09ICdkYSByZWN1cGVyYXJlJykge1xuICAgICAgY29uc29sZS5sb2coYOKPuO+4jyBQYXJ0aXRhICR7aW5kZXggKyAxfSAoSUQ6ICR7bS5pZH0pIHNhbHRhdGE6IGRhIHJlY3VwZXJhcmVgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTYWx0YSBsZSBwYXJ0aXRlIGNvbXBsZXRhdGUgZGkgZ2lvcm5hdGUgY2hlIGhhbm5vIHJlY3VwZXJpIHBlbmRlbnRpXG4gICAgaWYgKG0uc3RhdHVzID09PSAnY29tcGxldGF0YScgJiYgbS5tYXRjaGRheSAmJiBtYXRjaGRheXNXaXRoUmVjb3Zlcmllcy5oYXMobS5tYXRjaGRheSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDij7jvuI8gUGFydGl0YSAke2luZGV4ICsgMX0gKElEOiAke20uaWR9KSBzYWx0YXRhOiBnaW9ybmF0YSAke20ubWF0Y2hkYXl9IGhhIHJlY3VwZXJpIHBlbmRlbnRpYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYSA9IE51bWJlcihtLnNjb3JlQSB8fCAwKTtcbiAgICBjb25zdCBiID0gTnVtYmVyKG0uc2NvcmVCIHx8IDApO1xuICAgIGNvbnN0IG1hdGNoSWQgPSBtLmlkIHx8IGBtYXRjaF8ke2luZGV4fWA7XG5cbiAgICBjb25zdCB0ZWFtQSA9IChtLnRlYW1BIHx8IFtdKS5tYXAoKHA6IGFueSkgPT4gKHsgXG4gICAgICBpZDogcC5pZCB8fCBwLnBsYXllcklkLCBcbiAgICAgIG5hbWU6IHAubmFtZSB8fCBwLk5vbWUgfHwgJz8/JyBcbiAgICB9KSk7XG4gICAgY29uc3QgdGVhbUIgPSAobS50ZWFtQiB8fCBbXSkubWFwKChwOiBhbnkpID0+ICh7IFxuICAgICAgaWQ6IHAuaWQgfHwgcC5wbGF5ZXJJZCwgXG4gICAgICBuYW1lOiBwLm5hbWUgfHwgcC5Ob21lIHx8ICc/PycgXG4gICAgfSkpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBcXG4tLS0gUHJvY2Vzc2FuZG8gcGFydGl0YSAke2luZGV4ICsgMX0gKElEOiAke21hdGNoSWR9KSAtLS1gKTtcbiAgICBjb25zb2xlLmxvZyhgU2NvcmU6ICR7YX0tJHtifSwgU3RhdHVzOiAke20uc3RhdHVzfWApO1xuICAgIGNvbnNvbGUubG9nKGBUZWFtIEE6YCwgdGVhbUEubWFwKHAgPT4gYCR7cC5uYW1lfSAoJHtwLmlkfSlgKSk7XG4gICAgY29uc29sZS5sb2coYFRlYW0gQjpgLCB0ZWFtQi5tYXAocCA9PiBgJHtwLm5hbWV9ICgke3AuaWR9KWApKTtcbiAgICBcbiAgICBpZiAoIXRlYW1BLmxlbmd0aCB8fCAhdGVhbUIubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4p2MIFBhcnRpdGEgJHtpbmRleCArIDF9IHNhbHRhdGE6IHRlYW0gdnVvdGlgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0ZWFtQS5mb3JFYWNoKChwOiBhbnkpID0+IHtcbiAgICAgIGlmICghcC5pZCkge1xuICAgICAgICBjb25zb2xlLmxvZygn4p2MIFBsYXllciBBIHNlbnphIElEOicsIHApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzID0gZW5zdXJlKHAuaWQsIHAubmFtZSk7XG4gICAgICBjb25zdCBvbGRQb2ludHMgPSBzLnBvaW50cztcbiAgICAgIGNvbnN0IG9sZFBsYXllZCA9IHMucGxheWVkO1xuICAgICAgXG4gICAgICBzLnBvaW50cyArPSBhOyBcbiAgICAgIHMuc2V0c1dvbiArPSBhOyBcbiAgICAgIHMuc2V0c0xvc3QgKz0gYjsgXG4gICAgICBzLnBsYXllZCArPSAxO1xuICAgICAgcy5tYXRjaElkcy5wdXNoKG1hdGNoSWQpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFRlYW0gQSAtICR7cC5uYW1lfSAoJHtwLmlkfSk6IHB1bnRpICR7b2xkUG9pbnRzfeKGkiR7cy5wb2ludHN9LCBwYXJ0aXRlICR7b2xkUGxheWVkfeKGkiR7cy5wbGF5ZWR9LCBtYXRjaDogJHttYXRjaElkfWApO1xuICAgIH0pO1xuICAgIFxuICAgIHRlYW1CLmZvckVhY2goKHA6IGFueSkgPT4ge1xuICAgICAgaWYgKCFwLmlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgUGxheWVyIEIgc2VuemEgSUQ6JywgcCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHMgPSBlbnN1cmUocC5pZCwgcC5uYW1lKTtcbiAgICAgIGNvbnN0IG9sZFBvaW50cyA9IHMucG9pbnRzO1xuICAgICAgY29uc3Qgb2xkUGxheWVkID0gcy5wbGF5ZWQ7XG4gICAgICBcbiAgICAgIHMucG9pbnRzICs9IGI7IFxuICAgICAgcy5zZXRzV29uICs9IGI7IFxuICAgICAgcy5zZXRzTG9zdCArPSBhOyBcbiAgICAgIHMucGxheWVkICs9IDE7XG4gICAgICBzLm1hdGNoSWRzLnB1c2gobWF0Y2hJZCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgVGVhbSBCIC0gJHtwLm5hbWV9ICgke3AuaWR9KTogcHVudGkgJHtvbGRQb2ludHN94oaSJHtzLnBvaW50c30sIHBhcnRpdGUgJHtvbGRQbGF5ZWR94oaSJHtzLnBsYXllZH0sIG1hdGNoOiAke21hdGNoSWR9YCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20oc3RhdHMuZW50cmllcygpKVxuICAgIC5tYXAoKFtpZCwgc10pID0+ICh7XG4gICAgICBrZXk6IGlkLFxuICAgICAgbmFtZTogcy5uYW1lLFxuICAgICAgcG9pbnRzOiBzLnBvaW50cyxcbiAgICAgIHNldHNXb246IHMuc2V0c1dvbixcbiAgICAgIHNldHNMb3N0OiBzLnNldHNMb3N0LFxuICAgICAgc2V0RGlmZjogcy5zZXRzV29uIC0gcy5zZXRzTG9zdCxcbiAgICAgIHBsYXllZDogcy5wbGF5ZWQsXG4gICAgICBtYXRjaElkczogcy5tYXRjaElkcywgLy8gREVCVUc6IGluY2x1ZGkgbGUgcGFydGl0ZSBuZWwgcmlzdWx0YXRvXG4gICAgfSkpXG4gICAgLnNvcnQoKHgsIHkpID0+IChcbiAgICAgIHkucG9pbnRzIC0geC5wb2ludHMgfHxcbiAgICAgICh5LnNldHNXb24gLSB5LnNldHNMb3N0KSAtICh4LnNldHNXb24gLSB4LnNldHNMb3N0KSB8fFxuICAgICAgeC5wbGF5ZWQgLSB5LnBsYXllZCB8fFxuICAgICAgeC5uYW1lLmxvY2FsZUNvbXBhcmUoeS5uYW1lKVxuICAgICkpO1xuICAgIFxuICBjb25zb2xlLmxvZygnXFxuPT09IFJJU1VMVEFUTyBGSU5BTEUgQ0xBU1NJRklDQSA9PT0nKTtcbiAgY29uc29sZS5sb2coJ1RvdGFsIHBsYXllcnM6JywgcmVzdWx0Lmxlbmd0aCk7XG4gIFxuICAvLyBEZWJ1ZyBkZXR0YWdsaWF0byBkaSBvZ25pIGdpb2NhdG9yZVxuICByZXN1bHQuZm9yRWFjaCgocGxheWVyLCBpbmRleCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGAke2luZGV4ICsgMX0uICR7cGxheWVyLm5hbWV9OiAke3BsYXllci5wb2ludHN9IHB1bnRpLCAke3BsYXllci5wbGF5ZWR9IHBhcnRpdGUsIG1hdGNoZXM6IFske3BsYXllci5tYXRjaElkcy5qb2luKCcsICcpfV1gKTtcbiAgfSk7XG4gIFxuICBjb25zb2xlLmxvZygnPT09IEZJTkUgQ0FMQ09MTyBDTEFTU0lGSUNBID09PVxcbicpO1xuICBcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBDb250cm9sbGEgc2UgcmljaGllZGlhbW8gZGkgaW52YWxpZGFyZSBsYSBjYWNoZVxuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3QgZm9yY2VSZWZyZXNoID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3JlZnJlc2gnKSA9PT0gJ3RydWUnO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCc9PT0gQVBJIENMQVNTSUZJQ0EgQ0hJQU1BVEEgPT09Jyk7XG4gICAgY29uc29sZS5sb2coJ2ZvcmNlUmVmcmVzaDonLCBmb3JjZVJlZnJlc2gpO1xuICAgIFxuICAgIC8vIENvbnRyb2xsYSBjYWNoZSAoc2FsdGEgc2UgZm9yY2VSZWZyZXNoKVxuICAgIGNvbnN0IGNhY2hlS2V5ID0gJ2NsYXNzaWZpY2EnO1xuICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChjYWNoZUtleSk7XG4gICAgXG4gICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgY2FjaGVkICYmIERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wIDwgQ0FDSEVfRFVSQVRJT04pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2FuZG8gY2FjaGUgZXNpc3RlbnRlJyk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgcm93czogY2FjaGVkLmRhdGEsXG4gICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgdGltZXN0YW1wOiBjYWNoZWQudGltZXN0YW1wIFxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbnZhbGlkYW5kbyBjYWNoZSBwZXIgZm9yY2VSZWZyZXNoJyk7XG4gICAgICBjYWNoZS5kZWxldGUoY2FjaGVLZXkpO1xuICAgIH1cblxuICAgIGNvbnN0IGRiID0gYWRtaW5EYigpO1xuXG4gICAgLy8gTGVnZ2kgcGFydGl0ZSBjb21wbGV0YXRlIGNvbiBxdWVyeSBvdHRpbWl6emF0YVxuICAgIGNvbnN0IHNuYXAgPSBhd2FpdCBkYlxuICAgICAgLmNvbGxlY3Rpb24oJ21hdGNoZXMnKVxuICAgICAgLndoZXJlKCdzdGF0dXMnLCAnPT0nLCAnY29tcGxldGVkJylcbiAgICAgIC5nZXQoKTtcbiAgICAgIFxuICAgIC8vIFNlIG5vbiB0cm92aWFtbyBwYXJ0aXRlIGNvbiBzdGF0dXMgJ2NvbXBsZXRlZCcsIHByb3ZpYW1vIGEgY2VyY2FyZSBwYXJ0aXRlIGNvbiBzY29yZUEgZSBzY29yZUJcbiAgICBpZiAoc25hcC5lbXB0eSkge1xuICAgICAgY29uc29sZS5sb2coJ05lc3N1bmEgcGFydGl0YSBjb24gc3RhdHVzIFwiY29tcGxldGVkXCIgdHJvdmF0YSwgY2VyY28gcGFydGl0ZSBjb24gc2NvcmUuLi4nKTtcbiAgICAgIGNvbnN0IGFsbE1hdGNoZXMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdtYXRjaGVzJykuZ2V0KCk7XG4gICAgICBjb25zdCBtYXRjaGVzV2l0aFNjb3JlID0gYWxsTWF0Y2hlcy5kb2NzLmZpbHRlcihkb2MgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgcmV0dXJuIGRhdGEuc2NvcmVBICE9PSB1bmRlZmluZWQgJiYgZGF0YS5zY29yZUIgIT09IHVuZGVmaW5lZCAmJiBcbiAgICAgICAgICAgICAgIHR5cGVvZiBkYXRhLnNjb3JlQSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGRhdGEuc2NvcmVCID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICAgKGRhdGEuc2NvcmVBID4gMCB8fCBkYXRhLnNjb3JlQiA+IDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChtYXRjaGVzV2l0aFNjb3JlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFRyb3ZhdGUgJHttYXRjaGVzV2l0aFNjb3JlLmxlbmd0aH0gcGFydGl0ZSBjb24gc2NvcmUgbWEgc2VuemEgc3RhdHVzICdjb21wbGV0ZWQnYCk7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBtYXRjaGVzV2l0aFNjb3JlLm1hcChkb2MgPT4gZG9jLmRhdGEoKSk7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBjYWxjdWxhdGVTdGFuZGluZ3MobWF0Y2hlcyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgICByb3dzLFxuICAgICAgICAgIGNhY2hlZDogZmFsc2UsXG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIHRvdGFsTWF0Y2hlczogbWF0Y2hlcy5sZW5ndGgsXG4gICAgICAgICAgd2FybmluZzogXCJQYXJ0aXRlIHRyb3ZhdGUgdHJhbWl0ZSBzY29yZSwgbm9uIHRyYW1pdGUgc3RhdHVzICdjb21wbGV0ZWQnXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2hlcyA9IHNuYXAuZG9jcy5tYXAoZG9jID0+IGRvYy5kYXRhKCkpO1xuICAgIFxuICAgIC8vIERlYnVnIGRldHRhZ2xpYXRvIGRlbGxlIHBhcnRpdGUgdHJvdmF0ZVxuICAgIGNvbnNvbGUubG9nKCdQYXJ0aXRlIGNvbXBsZXRhdGUgdHJvdmF0ZTonLCBtYXRjaGVzLmxlbmd0aCk7XG4gICAgbWF0Y2hlcy5mb3JFYWNoKChtYXRjaCwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBQYXJ0aXRhICR7aW5kZXggKyAxfTpgLCB7XG4gICAgICAgIGlkOiBtYXRjaC5pZCxcbiAgICAgICAgcGhhc2U6IG1hdGNoLnBoYXNlLFxuICAgICAgICBkYXRlOiBtYXRjaC5kYXRlLFxuICAgICAgICB0ZWFtQTogbWF0Y2gudGVhbUE/Lm1hcChwID0+ICh7IGlkOiBwLmlkLCBuYW1lOiBwLm5hbWUgfSkpLFxuICAgICAgICB0ZWFtQjogbWF0Y2gudGVhbUI/Lm1hcChwID0+ICh7IGlkOiBwLmlkLCBuYW1lOiBwLm5hbWUgfSkpLFxuICAgICAgICBzY29yZUE6IG1hdGNoLnNjb3JlQSxcbiAgICAgICAgc2NvcmVCOiBtYXRjaC5zY29yZUIsXG4gICAgICAgIHN0YXR1czogbWF0Y2guc3RhdHVzXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBGaWx0cmEgbGUgcGFydGl0ZSBwZXIgZXNjbHVkZXJlIHF1ZWxsZSBmdXR1cmVcbiAgICBsZXQgdmFsaWRNYXRjaGVzID0gbWF0Y2hlcztcbiAgICBjb25zb2xlLmxvZygnQXBwbGljYW5kbyBmaWx0cm8gcGVyIGVzY2x1ZGVyZSBwYXJ0aXRlIGZ1dHVyZS4uLicpO1xuICAgIHZhbGlkTWF0Y2hlcyA9IG1hdGNoZXNcbiAgICAgIC5maWx0ZXIobWF0Y2ggPT4ge1xuICAgICAgICAvLyBFc2NsdWRpIHBhcnRpdGUgY29uIGRhdGUgZnV0dXJlIChjb21lIDIwMjUtMDktMDQpXG4gICAgICAgIGlmIChtYXRjaC5kYXRlICYmIG1hdGNoLmRhdGUgPiAnMjAyNS0wOC0zMScpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRXNjbHVkZW5kbyBwYXJ0aXRhIGZ1dHVyYTogJHttYXRjaC5pZH0gY29uIGRhdGEgJHttYXRjaC5kYXRlfWApO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAvLyBPcmRpbmEgcGVyIGRhdGEgZSBwb2kgcGVyIElEIHBlciBjb25zaXN0ZW56YVxuICAgICAgICBpZiAoYS5kYXRlICYmIGIuZGF0ZSkge1xuICAgICAgICAgIHJldHVybiBhLmRhdGUubG9jYWxlQ29tcGFyZShiLmRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoYS5pZCB8fCAnJykubG9jYWxlQ29tcGFyZShiLmlkIHx8ICcnKTtcbiAgICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBEb3BvIGlsIGZpbHRybzogJHt2YWxpZE1hdGNoZXMubGVuZ3RofSBwYXJ0aXRlIHZhbGlkZWApO1xuICAgIFxuICAgIC8vIENhbGNvbGEgY2xhc3NpZmljYVxuICAgIGNvbnN0IHJvd3MgPSBjYWxjdWxhdGVTdGFuZGluZ3ModmFsaWRNYXRjaGVzKTtcbiAgICBcbiAgICAvLyBEZWJ1ZzogbG9nIGRlbCByaXN1bHRhdG9cbiAgICBjb25zb2xlLmxvZygnQ2xhc3NpZmljYSBjYWxjb2xhdGE6Jywge1xuICAgICAgZm9yY2VSZWZyZXNoLFxuICAgICAgbWF0Y2hlc0NvdW50OiB2YWxpZE1hdGNoZXMubGVuZ3RoLFxuICAgICAgcm93c0NvdW50OiByb3dzLmxlbmd0aCxcbiAgICAgIGNhY2hlSGl0OiAhZm9yY2VSZWZyZXNoICYmIGNhY2hlZFxuICAgIH0pO1xuICAgIFxuICAgIC8vIERlYnVnIGRldHRhZ2xpYXRvIGRpIG9nbmkgZ2lvY2F0b3JlXG4gICAgY29uc29sZS5sb2coJ1xcbj09PSBERVRUQUdMSU8gR0lPQ0FUT1JJID09PScpO1xuICAgIHJvd3MuZm9yRWFjaCgocGxheWVyLCBpbmRleCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYCR7aW5kZXggKyAxfS4gJHtwbGF5ZXIubmFtZX06ICR7cGxheWVyLnBvaW50c30gcHVudGksICR7cGxheWVyLnBsYXllZH0gcGFydGl0ZSwgbWF0Y2hlczogWyR7cGxheWVyLm1hdGNoSWRzLmpvaW4oJywgJyl9XWApO1xuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCc9PT0gRklORSBERVRUQUdMSU8gPT09XFxuJyk7XG5cbiAgICAvLyBTYWx2YSBpbiBjYWNoZVxuICAgIGNhY2hlLnNldChjYWNoZUtleSwge1xuICAgICAgZGF0YTogcm93cyxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuICAgIH0pO1xuXG4gICAgLy8gUHVsaXNjaSBjYWNoZSB2ZWNjaGlhIChtYW50aWVuaSBzb2xvIHVsdGltaSAxMCBlbGVtZW50aSlcbiAgICBpZiAoY2FjaGUuc2l6ZSA+IDEwKSB7XG4gICAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbShjYWNoZS5lbnRyaWVzKCkpO1xuICAgICAgZW50cmllcy5zb3J0KChhLCBiKSA9PiBiWzFdLnRpbWVzdGFtcCAtIGFbMV0udGltZXN0YW1wKTtcbiAgICAgIGVudHJpZXMuc2xpY2UoMTApLmZvckVhY2goKFtrZXldKSA9PiBjYWNoZS5kZWxldGUoa2V5KSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgcm93cyxcbiAgICAgIGNhY2hlZDogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB0b3RhbE1hdGNoZXM6IHZhbGlkTWF0Y2hlcy5sZW5ndGhcbiAgICB9KTtcbiAgICBcbiAgICAvLyBEaXNhYmlsaXRhIGxhIGNhY2hlIGRlbCBicm93c2VyXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnUHJhZ21hJywgJ25vLWNhY2hlJyk7XG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0V4cGlyZXMnLCAnMCcpO1xuICAgIFxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3JlIEFQSSBjbGFzc2lmaWNhOicsIGUpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgcm93czogW10sIFxuICAgICAgZXJyb3I6IGU/Lm1lc3NhZ2UgfHwgJ0Vycm9yZSBpbnRlcm5vIGRlbCBzZXJ2ZXInLFxuICAgICAgY2FjaGVkOiBmYWxzZVxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0QXBwcyIsImluaXRpYWxpemVBcHAiLCJjZXJ0IiwiZ2V0RmlyZXN0b3JlIiwicnVudGltZSIsImR5bmFtaWMiLCJjYWNoZSIsIk1hcCIsIkNBQ0hFX0RVUkFUSU9OIiwiYWRtaW5EYiIsImxlbmd0aCIsInByb2plY3RJZCIsInByb2Nlc3MiLCJlbnYiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiY2xpZW50RW1haWwiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJwcml2YXRlS2V5IiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJyZXBsYWNlIiwiY3JlZGVudGlhbCIsImNhbGN1bGF0ZVN0YW5kaW5ncyIsIm1hdGNoZXMiLCJjb25zb2xlIiwibG9nIiwic3RhdHMiLCJlbnN1cmUiLCJpZCIsIm5hbWUiLCJoYXMiLCJzZXQiLCJwb2ludHMiLCJzZXRzV29uIiwic2V0c0xvc3QiLCJwbGF5ZWQiLCJtYXRjaElkcyIsImdldCIsIm1hdGNoZGF5c1dpdGhSZWNvdmVyaWVzIiwiU2V0IiwiZm9yRWFjaCIsIm0iLCJzdGF0dXMiLCJvcmlnaW5hbE1hdGNoZGF5IiwiYWRkIiwiaW5kZXgiLCJtYXRjaGRheSIsImEiLCJOdW1iZXIiLCJzY29yZUEiLCJiIiwic2NvcmVCIiwibWF0Y2hJZCIsInRlYW1BIiwibWFwIiwicCIsInBsYXllcklkIiwiTm9tZSIsInRlYW1CIiwicyIsIm9sZFBvaW50cyIsIm9sZFBsYXllZCIsInB1c2giLCJyZXN1bHQiLCJBcnJheSIsImZyb20iLCJlbnRyaWVzIiwia2V5Iiwic2V0RGlmZiIsInNvcnQiLCJ4IiwieSIsImxvY2FsZUNvbXBhcmUiLCJwbGF5ZXIiLCJqb2luIiwiR0VUIiwicmVxIiwidXJsIiwiVVJMIiwiZm9yY2VSZWZyZXNoIiwic2VhcmNoUGFyYW1zIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwianNvbiIsInJvd3MiLCJkYXRhIiwiZGVsZXRlIiwiZGIiLCJzbmFwIiwiY29sbGVjdGlvbiIsIndoZXJlIiwiZW1wdHkiLCJhbGxNYXRjaGVzIiwibWF0Y2hlc1dpdGhTY29yZSIsImRvY3MiLCJmaWx0ZXIiLCJkb2MiLCJ1bmRlZmluZWQiLCJ0b3RhbE1hdGNoZXMiLCJ3YXJuaW5nIiwibWF0Y2giLCJwaGFzZSIsImRhdGUiLCJ2YWxpZE1hdGNoZXMiLCJtYXRjaGVzQ291bnQiLCJyb3dzQ291bnQiLCJjYWNoZUhpdCIsInNpemUiLCJzbGljZSIsInJlc3BvbnNlIiwiaGVhZGVycyIsImUiLCJlcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/classifica/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassifica%2Froute&page=%2Fapi%2Fclassifica%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassifica%2Froute.ts&appDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFullPrice%5CDesktop%5Cgiancarlo-padel-championship%5Cgiancarlo-padel-championship&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();